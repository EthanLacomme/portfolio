// Fichier de traductions multilingues (FR / EN)
window.TRANSLATIONS = {
    fr: {
        // Header & Navigation
        nav: {
            accueil: "Accueil",
            aPropos: "A propos de moi",
            competences: "Mes compÃ©tences",
            projets: "Mes projets",
            contact: "Me contacter"
        },
        
        // Sections
        accueil: {
            titre: "Bonjour",
            bienvenue: "Bienvenue sur mon portfolio.",
            description: "Vous pouvez naviguer par les diffÃ©rentes sections se trouvant en haut de la page, sinon faite dÃ©filer de haut en bas."
        },
        
        aPropos: {
            titre: "A propos de moi",
            ligne1: "Je m'appelle Ethan Lacomme, j'ai ",
            ans: " ans.",
            ligne2: "Je suis un jeune dÃ©veloppeur, curieux par les possibilitÃ©s de crÃ©ation qu'offre ce domaine.",
            ligne3: "Je suis actuellement dans la filiÃ¨re Jeu vidÃ©o - Level design (Bac+3) Ã  l'UniversitÃ© LumiÃ¨re Lyon 2 ",
            programme: "Gamagora",
            ligne4: " dans le but de poursuivre avec un master sur 2 ans.",
            cv: "Mon CV"
        },
        
        competences: {
            titre: "Mes compÃ©tences",
            programmation: "Languages de programmation, dÃ©jÃ  pratiquÃ©s",
            environnement: "Environnements de dÃ©veloppement - Logiciels, dÃ©jÃ  pratiquÃ©s",
            voirPlus: "Voir plus"
        },
        
        projets: {
            titre: "Mes projets",
            tag: "Tag",
            colonnes: "Colonnes",
            elements: "Ã‰lÃ©ments",
            voirPlus: "Voir plus"
        },
        
        contact: {
            titre: "Me contacter",
            linkedIn: "Lien LinkedIn : Ethan Lacomme",
            githubPrincipal: "GitHub Principal",
            githubPortfolio: "GitHub du portfolio"
        },
        
        footer: {
            credit: "Site rÃ©alisÃ© par Ethan Lacomme",
            lastUpdate: "DerniÃ¨re mise Ã  jour publiÃ© le"
        },
        
        // Bouton langue
        language: "Langue",
        
        // Projets data
        projetsData: {
            liens: {
                documentation: "Voir sa documentation",
                manuel: "Manuel utilisateur",
                github: "Voir sur github",
                itch: "Voir sur itch",
                savoirPlus: "En savoir plus",
                redaction: "En savoir plus"
            },
            1: {
                titre: "Adminer",
                description: "Adminer est une application permettant de gÃ©rer des bases de donnÃ©es avec une interface web. J'ai rÃ©alisÃ© son installation sur un environnement linux et effectuÃ© des test sur des donnÃ©es."
            },
            2: {
                titre: "Site vitrine",
                description: "Une base de site vitrine fait de zÃ©ro en htlm, css, php et javascript. RÃ©alisÃ© pour une entreprise de prestation informatique."
            },
            3: {
                titre: "OCS Inventory",
                description: "OCS Inventory est une application permettant de gÃ©rer un parc informatique. J'ai rÃ©alisÃ© son installation sur un environnement linux, un exemple de remontÃ©e de poste et d'installation de plugins"
            },
            4: {
                titre: "Snipe IT",
                description: "Snipe IT est une application permettant de gÃ©rer un parc informatique. J'ai rÃ©alisÃ© son installation sur un environnement linux et un exemple de remontÃ©e de poste"
            },
            5: {
                titre: "Veille sur les IA et l'usurpation d'identitÃ©",
                description: "Les IA sont de plus en plus prÃ©sentes dans notre quotidien, malgrÃ© les avantages qu'elles apportent, elles sont nÃ©anmoins aussi utilisÃ©es pour des raison contestables."
            },
            6: {
                titre: "GLPI",
                description: "GLPI est une application permettant de gÃ©rer un parc informatique. J'ai rÃ©alisÃ© son installation sur un environnement linux, un exemple de remontÃ©e de poste et de gestion de tickets"
            },
            7: {
                titre: "Mamoot",
                description: "Mamoot est un site pour crÃ©er et jouer Ã  des quiz, conÃ§u avec le framework Symfony. J'ai pu rÃ©aliser la mise en forme de la maquette vers le css, backend administrateur, animation du podium en javascript..."
            },
            8: {
                titre: "Gestion des vÃ©hicules (GVH)",
                description: "GVH est une application permettant de gÃ©rer et rÃ©server des vÃ©hicules. J'y ai dÃ©veloppÃ© un systÃ¨me d'images et de statistiques."
            },
            9: {
                titre: "Jeux de plateforme",
                description: "Un projet de jeux de plateforme, rÃ©alisÃ© sur unreal engine 5, le but est de finir les niveau en Ã©vitant les obstacles."
            },
            10: {
                titre: "Jeux de cible",
                description: "Un projet de jeux de cible, rÃ©alisÃ© sur unreal engine 5, le but est de toucher toutes les cibles placÃ© dans le niveau pour terminer le niveau."
            },
            11: {
                titre: "Jeux de tower defense",
                description: "Un projet de jeux Tower Defense, rÃ©alisÃ© sur unreal engine 5, le but est de dÃ©fendre sa base contre des vagues d'ennemis en plaÃ§ant des tours Ã  des enplacements stratÃ©giques."
            },
            12: {
                titre: "Escape Game VR",
                description: "Un projet d'escape game que j'ai rÃ©alisÃ© pour de la rÃ©alitÃ© virtuel sur Unreal Engine 5, le but est de rÃ©soudre les diffÃ©rentes Ã©nigmes pour s'Ã©chapper de la zone."
            },
            13: {
                titre: "RechercheEnNature",
                description: "Un projet que j'ai rÃ©alisÃ© sur Unreal Engine 5, le but est de collectez des objets pour passez les diffÃ©rentes zone et rÃ©cupÃ©rer le coffre au trÃ©sor."
            },
            14: {
                titre: "LeProf",
                description: "Un projet que j'ai rÃ©alisÃ© sur Unreal Engine, le but est de rÃ©pondre au questions des tableaux avec une rÃ©action adÃ©quate du professeur en fonction d'une bonne ou mauvaise rÃ©ponse."
            },
            15: {
                titre: "Combat d'la mort",
                description: "Un projet que j'ai rÃ©alisÃ© avec un camarade sur Unreal Engine, le but est d'affronter un boss en 4 phases qui vont Ãªtre de plus en plus compliquÃ©."
            },
            16: {
                titre: "Avoiding Space",
                description: "Un projet sur kinect rÃ©alisÃ© Ã  un stage avec un camarade sur Unity, le but est de contrÃ´ler un vaisseau et d'esquiver le plus possible d'obstacle pour survivre le plus longtemps et avoir un bon score de temps."
            },
            17: {
                titre: "Vr Lab",
                description: "Un projet de rÃ©alitÃ© virtuel de fin d'annÃ©e fait sur Unreal Engine, avec 4 salles comportant diffÃ©rentes mÃ©caniques."
            }
        }
    },
    
    en: {
        // Header & Navigation
        nav: {
            accueil: "Home",
            aPropos: "About Me",
            competences: "Skills",
            projets: "Projects",
            contact: "Contact"
        },
        
        // Sections
        accueil: {
            titre: "Hello",
            bienvenue: "Welcome to my portfolio.",
            description: "You can navigate through the different sections at the top of the page, or scroll down from top to bottom."
        },
        
        aPropos: {
            titre: "About Me",
            ligne1: "My name is Ethan Lacomme, I am ",
            ans: " years old.",
            ligne2: "I am a young developer, curious about the creative possibilities offered by this field.",
            ligne3: "I am currently in the Video Game - Level Design program (Bachelor's degree) at UniversitÃ© LumiÃ¨re Lyon 2 ",
            programme: "Gamagora",
            ligne4: " with the goal of continuing with a 2-year master's degree.",
            cv: "My Resume"
        },
        
        competences: {
            titre: "My Skills",
            programmation: "Programming Languages I have used",
            environnement: "Development Environments - Software I have used",
            voirPlus: "See more"
        },
        
        projets: {
            titre: "My Projects",
            tag: "Tag",
            colonnes: "Columns",
            elements: "Items",
            voirPlus: "See more"
        },
        
        contact: {
            titre: "Contact Me",
            linkedIn: "LinkedIn: Ethan Lacomme",
            githubPrincipal: "Main GitHub",
            githubPortfolio: "Portfolio GitHub"
        },
        
        footer: {
            credit: "Website created by Ethan Lacomme",
            lastUpdate: "Last update published on"
        },
        
        // Bouton langue
        language: "Language",
        
        // Projets data
        projetsData: {
            liens: {
                documentation: "View documentation",
                manuel: "User manual",
                github: "View on github",
                itch: "View on itch",
                savoirPlus: "Learn more",
                redaction: "Learn more"
            },
            1: {
                titre: "Adminer",
                description: "Adminer is an application for managing databases with a web interface. I installed it on a Linux environment and performed tests on data."
            },
            2: {
                titre: "Showcase Website",
                description: "A showcase website built from scratch in HTML, CSS, PHP and JavaScript. Created for an IT services company."
            },
            3: {
                titre: "OCS Inventory",
                description: "OCS Inventory is an application for managing IT infrastructure. I installed it on a Linux environment, with an example of computer registration and plugin installation."
            },
            4: {
                titre: "Snipe IT",
                description: "Snipe IT is an application for managing IT infrastructure. I installed it on a Linux environment with an example of computer registration."
            },
            5: {
                titre: "AI and Identity Theft Research",
                description: "AI is increasingly present in our daily lives, despite the advantages they bring, they are also used for questionable reasons."
            },
            6: {
                titre: "GLPI",
                description: "GLPI is an application for managing IT infrastructure. I installed it on a Linux environment, with an example of computer registration and ticket management."
            },
            7: {
                titre: "Mamoot",
                description: "Mamoot is a website for creating and playing quizzes, designed with the Symfony framework. I worked on converting the mockup to CSS, backend administration, podium animation in JavaScript..."
            },
            8: {
                titre: "Vehicle Management (GVH)",
                description: "GVH is an application for managing and booking vehicles. I developed an image and statistics system."
            },
            9: {
                titre: "Platform Game",
                description: "A platform game project, created on Unreal Engine 5, the goal is to complete the levels by avoiding obstacles."
            },
            10: {
                titre: "Target Game",
                description: "A target game project, created on Unreal Engine 5, the goal is to hit all the targets placed in the level to complete it."
            },
            11: {
                titre: "Tower Defense Game",
                description: "A Tower Defense game project, created on Unreal Engine 5, the goal is to defend your base against waves of enemies by placing towers in strategic locations."
            },
            12: {
                titre: "VR Escape Game",
                description: "An escape game project I created for virtual reality on Unreal Engine 5, the goal is to solve various puzzles to escape the area."
            },
            13: {
                titre: "RechercheEnNature",
                description: "A project I created on Unreal Engine 5, the goal is to collect objects to pass through different areas and retrieve the treasure chest."
            },
            14: {
                titre: "LeProf",
                description: "A project I created on Unreal Engine, the goal is to answer the board questions with an appropriate reaction from the teacher based on a correct or incorrect answer."
            },
            15: {
                titre: "Combat d'la mort",
                description: "A project I created with a classmate on Unreal Engine, the goal is to face a boss in 4 phases that will become increasingly difficult."
            },
            16: {
                titre: "Avoiding Space",
                description: "A Kinect project created during an internship with a classmate on Unity, the goal is to control a spaceship and dodge as many obstacles as possible to survive as long as possible and achieve a good time score."
            },
            17: {
                titre: "Vr Lab",
                description: "A year-end virtual reality project made on Unreal Engine, with 4 rooms featuring different mechanics."
            }
        }
    }
};

// Langue actuelle (par dÃ©faut anglais) - Variable globale
window.currentLanguage = localStorage.getItem('portfolio-language') || 'en';

// Initialise le localStorage Ã  'en' si pas dÃ©jÃ  dÃ©fini
if (!localStorage.getItem('portfolio-language')) {
    localStorage.setItem('portfolio-language', 'en');
}

// Fonction pour obtenir une traduction
function t(key) {
    const keys = key.split('.');
    let value = TRANSLATIONS[window.currentLanguage];
    
    for (let k of keys) {
        value = value[k];
        if (!value) return key; // Retour de la clÃ© si traduction non trouvÃ©e
    }
    
    return value;
}

// Fonction pour changer la langue
function setLanguage(lang) {
    if (!TRANSLATIONS[lang]) {
        console.warn(`Langue ${lang} non disponible`);
        return;
    }
    
    window.currentLanguage = lang;
    localStorage.setItem('portfolio-language', lang);
    
    // Mettre Ã  jour le bouton langue
    updateLanguageButton();
    
    // Mettre Ã  jour tous les Ã©lÃ©ments traduits
    updateAllTranslations();
    
    // Mettre Ã  jour les traductions de rÃ©daction si on est sur une page de rÃ©daction
    if (typeof updateRedactionTranslations === 'function') {
        updateRedactionTranslations();
    }
    
    // Recharger l'affichage des projets pour appliquer les traductions
    if (typeof refreshProjectsDisplay === 'function') {
        refreshProjectsDisplay();
    }
}

// Fonction pour toggle entre les langues
function toggleLanguage() {
    const newLang = window.currentLanguage === 'fr' ? 'en' : 'fr';
    setLanguage(newLang);
}

// Mettre Ã  jour le bouton de langue active
function updateLanguageButton() {
    const langText = document.getElementById('lang-text');
    const langIcon = document.getElementById('lang-icon');
    
    if (langText) {
        // Affiche la langue vers laquelle on peut aller (l'inverse de la langue actuelle)
        langText.textContent = window.currentLanguage === 'fr' ? 'EN' : 'FR';
    }
    
    if (langIcon) {
        // Affiche le drapeau de la langue vers laquelle on peut aller
        langIcon.textContent = window.currentLanguage === 'fr' ? 'ðŸ‡ºðŸ‡¸' : 'ðŸ‡«ðŸ‡·';
    }
}

// Mettre Ã  jour toutes les traductions dans le DOM
function updateAllTranslations() {
    // Mise Ã  jour des Ã©lÃ©ments par data-i18n
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        const translated = t(key);
        
        // Si c'est un input/select, modifier value sinon modifier textContent
        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
            el.placeholder = translated;
        } else if (el.tagName === 'SELECT') {
            el.title = translated;
        } else {
            el.textContent = translated;
        }
    });
    
    // Mise Ã  jour des attributs title
    document.querySelectorAll('[data-i18n-title]').forEach(el => {
        const key = el.getAttribute('data-i18n-title');
        el.title = t(key);
    });
    
    // Mise Ã  jour des attributs placeholder
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        el.placeholder = t(key);
    });
}

// Initialiser la langue au chargement
document.addEventListener('DOMContentLoaded', function() {
    updateLanguageButton();
    updateAllTranslations();
});
